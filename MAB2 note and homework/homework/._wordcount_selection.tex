\begin{exercise}{9.2.31}
试证:方程$\parfrac[2]{u}{x} + 2 \cos x \parfrac{u}{x,y} - \parfrac[2]{u}{y} \sin^2 x - \parfrac{u}{y} \sin x = 0$经变换$\begin{cases}
    \xi = x - \sin x + y,\\
    \eta = x + \sin x - y
\end{cases}$后可化为$\parfrac{u}{\xi,\eta} = 0$.(其中二阶偏导数均连续)
\end{exercise}

\begin{solution}
    由链式法则得
    \begin{align*}
        \parfrac{u}{x} &= \parfrac{u}{\xi} \parfrac{\xi}{x} + \parfrac{u}{\eta} \parfrac{\eta}{x} = (1-\cos x) \parfrac{u}{\xi} + (1+\cos x) \parfrac{u}{\eta}\\
        \parfrac{u}{y} &= \parfrac{u}{\xi} \parfrac{\xi}{y} + \parfrac{u}{\eta} \parfrac{\eta}{y} = \parfrac{u}{\xi} - \parfrac{u}{\eta}
    \end{align*}
    因此
    \begin{align*}
        \parfrac[2]{u}{x} &= \parfrac{}{x} \left( (1-\cos x) \parfrac{u}{\xi} + (1+\cos x) \parfrac{u}{\eta} \right)\\
        &= \left( (1-\cos x) \parfrac{}{\xi} + (1+\cos x) \parfrac{}{\eta} \right) \left( (1-\cos x) \parfrac{u}{\xi} + (1+\cos x) \parfrac{u}{\eta} \right)\\
        &= (1-\cos x)^2 \parfrac[2]{u}{\xi} + (1+\cos x)^2 \parfrac[2]{u}{\eta} + 2(1-\cos x)(1+\cos x) \parfrac{u}{\xi,\eta}\\
        \parfrac[2]{u}{y} &= \parfrac{}{y} \left( \parfrac{u}{\xi} - \parfrac{u}{\eta} \right) = \parfrac{}{\xi} \left( \parfrac{u}{\xi} - \parfrac{u}{\eta} \right) - \parfrac{}{\eta} \left( \parfrac{u}{\xi} - \parfrac{u}{\eta} \right)\\
        &= \parfrac[2]{u}{\xi} - \parfrac[2]{u}{\eta} - 2\parfrac{u}{\xi,\eta}\\
        \parfrac{u}{x,y} &= \parfrac{}{y} \left( (1-\cos x) \parfrac{u}{\xi} + (1+\cos x) \parfrac{u}{\eta} \right)\\
        &= \left( \parfrac{}{\xi} - \parfrac{}{\eta} \right) \left( (1-\cos x) \parfrac{u}{\xi} + (1+\cos x) \parfrac{u}{\eta} \right)\\
        &= (1-\cos x) \parfrac[2]{u}{\xi} - (1+\cos x) \parfrac[2]{u}{\eta} + 2 \cos x \parfrac{u}{\xi,\eta}
    \end{align*}
    代入得
    \begin{align*}
        0 &= \parfrac[2]{u}{x} + 2 \cos x \parfrac{u}{x,y} - \parfrac[2]{u}{y} \sin^2 x - \parfrac{u}{y} \sin x \\
        &= \left( (1-\cos x)^2 + (1-\cos x) 2 \cos x -\sin^2 x \right) \parfrac[2]{u}{\xi}\\
        &+ \left( (1-\cos x)2(1-\cos^2 x) + 2\cos x 2\cos x - \sin^2 x (-2) \right) \parfrac{u}{\xi,\eta}\\
        &+ \left( (1-\cos x)(1+\cos x)^2 + 2\cos x (-(1+\cos x)) - \sin^2 x (1+\cos x) \right)\parfrac[2]{u}{\eta}\\
        &= 2 \parfrac{u}{\xi,\eta}
    \end{align*}

\end{solution}