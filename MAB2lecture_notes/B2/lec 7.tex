\setcounter{chapter}{6} % 设置章节计数器

\chapter{偏导数与全微分(total differential)}

\section{多元函数的偏导数(partial derivative)}

在多元函数$z=f(x,y),(x,y)\in D$中,设$M_0(x_0,y_0),M_1(x_0+\Delta x,y_0),M_2(x_0,y_0+\Delta y)\in D $,则
\begin{enumerate}
    \item $f(x_0+\Delta x,y_0)-f(x_0,y_0)$是固定$y$,仅让$x$发生变化而使得$z$产生的增量.
    \item $f(x_0,y_0+\Delta y)-f(x_0,y_0)$是固定$x$,仅让$y$发生变化而使得$z$产生的增量.
\end{enumerate}

记$\Delta z_x =f(x_0+\Delta x,y_0)-f(x_0,y_0),\Delta z_y =f(x_0,y_0+\Delta y)-f(x_0,y_0)$分别称作因变量$z$关于$x,y$的偏增量,并有如下定义:
\begin{definition}
    \begin{enumerate}
        \item $\lim_{\delta x \to 0}\frac{f(x_0+\Delta x,y_0)-f(x_0,y_0)}{\Delta x}$为$z$关于$x$在$M_0(x_0,y_0)$处的偏导数,并记作
        $$\frac{\partial z}{\partial x}\bigg|_{M_0}=f'_x(M_0)=f'_x(x_0,y_0)=\lim_{\delta x \to 0}\frac{f(x_0+\Delta x,y_0)-f(x_0,y_0)}{\Delta x}=\big(f(x,y_0)\big)'_x\bigg|_{x_0}$$

        \item $\lim_{\delta y \to 0}\frac{f(x_0,y_0+\Delta y)-f(x_0,y_0)}{\Delta y}$为$z$关于$y$在$M_0(x_0,y_0)$处的偏导数,并记作
        $$\frac{\partial z}{\partial y}\bigg|_{M_0}=f'_y(M_0)=f'_y(x_0,y_0)=\lim_{\delta y \to 0}\frac{f(x_0,y_0+\Delta y)-f(x_0,y_0)}{\Delta y}=\big(f(x_0,y)\big)'_y\bigg|_{y_0}$$
    \end{enumerate}
\end{definition}

\begin{remark}
    \begin{enumerate}
        \item $\frac{\partial z}{\partial x}\bigg|_{(x_0,y_0)}$;
        \item $\frac{\partial f}{\partial x}(x_0,y_0),\frac{\partial f(x_0,y_0)}{\partial x},\frac{\partial f}{\partial x}\bigg|_{(x_0,y_0)}$;
        \item $f'_x(x_0,y_0)$;
        \item $f'_1(x_0,y_0)$(一定程度上可以避免复合函数指代的问题,但最好标注一下是对$f$的第一个变量位置求导).
    \end{enumerate}
\end{remark}

$f'_x(M_0),f'_y(M_0)$实际上就是在点$M_0$处,因变量$z$分别关于$x,y$的相对瞬时变化率.
即$$f'_x(x_0,y_0)=\frac{\dif{}f(x,y_0)}{\dif{}x}\bigg|_{x_0},f'_y(x_0,y_0)=\frac{\dif{}f(x_0,y)}{\dif{}y}\bigg|_{y_0}$$

同理,设$u=f(x,y,z)$在$\bar{U}(M_0,\delta)$中有定义,则

$$f'_x(x_0,y_0,z_0)=\frac{\dif{}f(x,y_0,z_0)}{\dif{}x}\bigg|_{x_0},f'_y(x_0,y_0,z_0)=\frac{\dif{}f(x_0,y,z_0)}{\dif{}y}\bigg|_{y_0},f'_z(x_0,y_0,z_0)=\frac{\dif{}f(x_0,y_0,z)}{\dif{}z}\bigg|_{z_0}$$,其余情形可类推.

总之,多元函数的偏导数,就是将多元函数中的其余自变量固定,只把因变量对一个自变量求导的结果.

\begin{example}
    设$f(x,y)=\begin{cases}
        \frac{x^2y}{x^4+y^2},&x^2+y^\neq0\\
        0,&x^2+y^2=0
    \end{cases}$
    \begin{enumerate}
        \item 证明$f(x,y)$在$(0,0)$处不连续;
        \item 证明$f'_x(0,0)=f'_y(0,0)=0$,即$f(x,y)$在$(0,0)$处可偏导;
        \item 求$f'_x(1,1),f'_y(2,1)$.
    \end{enumerate}
\end{example}
\begin{solution}
    \begin{enumerate}
        \item 沿着$y=kx^2$可得在$(0,0)$不连续.
        \item $f'_x(0,0)=\lim_{\Delta x\to 0}\frac{f(\Delta x,0)-f(0,0)}{\Delta x}=\lim_{\Delta x\to 0}\frac{\frac{(\Delta x)^2\cdot 0}{(\Delta x)^4+0^2}}{\Delta x}=\lim_{\Delta x\to 0}0=0$,同理$f'_y(0,0)=0$
        \item $f'_x(1,1)=\big(f(x,1)\big)'_x\bigg|_{x=1}=\left(\frac{x^2\cdot 1}{x^4+1^2}\right)'_x\bigg|_{x=1}=\frac{2x-2x^5}{(x^4+1)^2}\bigg|_{x=1}=0$
        
        $f'_y(2,1)=\big(f(2,y)\big)'_y\bigg|_{x=1}=\left(\frac{2^2y}{2^4+y^2}\right)'_y\bigg|_{y=1}=\frac{4(16-y^2)}{(16+y^2)^2}\bigg|_{y=1}=\frac{60}{289}$
    \end{enumerate}
\end{solution}

\begin{example}
    设$f(x,y)=\sqrt{x^2+y^2}$,证明:\begin{enumerate}
        \item $f(x,y)$在$(0,0)$处连续.
        \item $f(x,y)$在$(0,0)$处偏导数$f'_x(0,0),f'_y(0,0)$不存在,即$f(x,y)$在$(0,0)$处不可偏导.
    \end{enumerate}
\end{example}
\begin{proof}
    \begin{enumerate}
        \item $\lim_{\substack{x\to0\\y\to0}}\sqrt{x^2+y^2}=0=f(0,0)$
        \item $f'_x(0,0)=\big(\sqrt{x^2+0}\big)'_x\bigg|_{x=0}=\big(|x|\big)'_x\bigg|_{x=0}$不存在.同理$f'_y(0,0)$不存在.
    \end{enumerate}
\end{proof}
从两个例题可知,多元函数连续性和可偏导性没有关系.

\section{多元函数全微分(total differential)与可微性}
\begin{definition}
    设$z=f(x,y),(x,y)\in D\in \R^2$,并设$M_0(x_0,y_0),M(x_0+\Delta x,y_0+\Delta y)\in D $,若存在常数$A,B$,设$z=f(x,y)$在$M_0$处的全增量可表示为$$\Delta z=f(M)-f(M_0)=f(x_0+\Delta x ,y_0+\Delta y)-f(x_0,y_0)=A\Delta x+B\Delta y+o(\rho)$$q其中,$\rho=\rho(M,M_0)=\sqrt{(\Delta x)^2+(\Delta y)^2}$,则称$z=f(x,y)$是可微的.
    
    称$\Delta x,\Delta y$的线性函数:$A\delta x+B\Delta y=A(x-x_0)+B(y-y_0)$为$f(x,y)$在$M_0$处的全微分,记作$\dif{}z\bigg|_{M_0}=A\Delta x+B\Delta y=A(x-x_0)+B(y-y_0)$

    即在$z=f(x,y)$在点$M_0(x_0,y_0)$可微的条件下,有$\Delta z=\dif{z}\bigg|_{M_0}+o(\rho)=A(x-x_0)+B(y-y_0)+o(\rho)$
\end{definition}

同理,若三元函数$u=f(x,y,z)$在点$M_0(x_0,y_0,z_0)$处的全增量可表示为
$$\Delta u=f(x_0+\Delta x,y_0+\Delta y,z_0+\Delta z)-f(x_0,y_0,z_0)+o(\rho)$$
其中$A,B,C$为常数,$\rho=\rho(M_0,M)=\sqrt{(\Delta x)^2+(\Delta y)^2+(\Delta z)^2}$,则称$u=f(x,y,z)$在点$M_0$处可微,且$A\Delta x+B\Delta y+C\Delta z$称为$f(x,y,z)$在点$M_0$处的全微分,记作$\dif{}u\bigg|_{M_0}=A\Delta x+B\Delta y+C\Delta z$
即有
$\Delta u=\dif{}u\bigg|_{M_0}+o(\rho)=A(x-x_0)+B(y-y_0)+C(z-z_0)+o(\rho)$
更高维上的可类似进行定义.

若$z=f(x,y)$在区域$D$中每一点可微,则称$f(x,y)$在区域$D$上可微.

\begin{remark}
    关于$\dif$这个符号,有如下几种认知,
    \begin{enumerate}
        \item 完全当做记号来用,即只有全微分,积分,以及有些情况下的导数才使用,实际上B2中也确实最好这么做.
        \item 如上述表述中的,作为线性主部存在,$\dif{}z=A(x-x_0)+B(y-y_0)$.但一般不用$\dif{}d z$去直接代替做运算.
        \item 特殊的线性映射,相当于认为$\dif{}z(\Delta x,\Delta y)\bigg|_{(x_,y_0)}=A(x_0+\Delta x-x_0)+B(y_0+\Delta y-y_0)$,这是B3中的定义,了解一下即可.
        \item 一种特殊算子,在B2的后续选讲课程中微分形式涉及到这一部分,也是了解即可.
    \end{enumerate}
    我们在B2中实际上可以按照第二种方式去理解,但最好不要让$\dif{}z=A(x-x_0)+B(y-y_0)$这种形式出现,因为这种表达方式和另外三种都有些冲突,且容易出错.
    实际上更多的当成完全的记号来使用会更好.
\end{remark}

\begin{theorem}
    \begin{enumerate}
        \item 若$z=f(x,y)$在点$M_0(x_0,y_0)$处可微,则$f(x,y)$在$M_0$处连续.反之未必.
        \item 若$z=f(x,y)$在点$M_0(x_0,y_0)$处可微,则$f(x,y)$在$M_0$处可偏导.反之未必.
    \end{enumerate}
\end{theorem}
\begin{proof}
    \begin{enumerate}
        \item 
            \begin{enumerate}
                \item 当$\rho=\sqrt{(\Delta x)^2+(\Delta y)^2}\to 0$,有$\begin{cases}
                \Delta x\to 0,\\
                \Delta y\to 0;
                \end{cases}$,而$$\lim_{\substack{\Delta x\to 0\\\Delta y \to 0}}\Delta z=\lim_{\substack{\Delta x\to 0\\\Delta y \to 0}}A\Delta x+B\Delta y+o(\rho)=0$$.
                因此$$\lim_{\substack{\Delta x\to 0\\\Delta y \to 0}}f(x_0+\Delta x,y_0+\Delta y)=f(x_0,y_0)$$.
                即有连续性.
                \item 反例:$z=\sqrt{x^2+y^2}$在原点处连续但不可微,否则原点处可偏导.
            \end{enumerate}
        \item 
            \begin{enumerate}
                \item $$\lim_{\Delta x\to 0}\frac{f(x_0+\Delta x,y_0)-f(x_0,y_0)}{\Delta x}=\lim_{\Delta x\to 0}\frac{A\Delta x+o(|\Delta x|)}{\Delta x}=A$$
                因此$f'_x(x_0,y_0)$存在,且$f'_x(x_0,y_0)=A$.
        
                同理,有$f'_x(x_0,y_0)$存在,$f'_y(x_0,y_0)=B$.故而可得偏导存在.
                \item 反例:$f(x,y)=\begin{cases}
                    \frac{x^2y}{x^4+y^2},&x^2+y^2>0\\
                    0,&x^2+y^2=0
                \end{cases}$在原点处可偏导但不连续,故一定不可微.
            \end{enumerate}
    \end{enumerate}
\end{proof}

\begin{example}
    证明:$f(x,y)=\begin{cases}
    \frac{x^2y}{x^2+y^2},&x^2+y^2>0\\
    0,&x^2+y^2=0
    \end{cases}$在原点处可偏导,连续,但不可微.
\end{example}
\begin{solution}
    \begin{enumerate}
        \item \begin{align*}
            0\les\left|\frac{x^2y}{x^2+y^2}\right|
            &=\frac{|x||y|\cdot |x|}{x^2+y^2}\\
            &\les\frac{\frac{1}{2}(x^2+y^2)\cdot |x|}{x^2+y^2}\\
            &=\frac{|x|}{2}\to 0
        \end{align*}
        故得连续.
        \item $$f'_x(0,0)=(\frac{x^2\cdot0}{x^4+0^2})'_x\bigg|_{x=0}=(0)'_x|_{x=0}=0$$
        $$f'_y(0,0)=(\frac{0^2\cdot y}{0^4+y^2})'_y\bigg|_{y=0}=(0)'_y\bigg|_{y=0}=0$$
        故得可偏导.
        \item 反证法:假设在原点处可微.则有$$f(\Delta x,\Delta y)-0=A\Delta x+B\Delta y+o(\rho)$$
        结合偏导数可知上述等式可化为
        $$\frac{(\Delta x)^2\Delta y}{(\Delta x)^2+(\Delta y)^2}=o(\rho)$$
        即$$\lim_{\rho \to 0}\frac{\frac{(\Delta x)^2\Delta y}{(\Delta x)^2+(\Delta y)^2}}{\sqrt{(\Delta x)^2+(\Delta y)^2}}=\lim_{\rho \to 0}\frac{(\Delta x)^2\Delta y}{((\Delta x)^2+(\Delta y)^2)^\frac{3}{2}}=0$$

        但当$$\lim_{\substack{\Delta x\to 0\\\Delta y=k\Delta x}}\frac{(\Delta x)^2\Delta y}{((\Delta x)^2+(\Delta y)^2)^\frac{3}{2}}=\lim_{\Delta x\to 0}\frac{(\Delta x)^2k\Delta x}{((\Delta x)^2+k(\Delta x)^2)^\frac{3}{2}}=\frac{k}{(1+k^2)^{\frac{3}{2}}}$$与$k$有关,故与极限存在唯一性矛盾,因此可知原函数在原点不可微.
    \end{enumerate}
\end{solution}

\begin{example}{思考题}
    设$u=f(x,y,z)=x^{y^z}+x^{a^z}+a^{y^z}+x^{y^a}+a^{a^z}(a>0,\text{常数})$
    求$\frac{\partial u}{\partial x},\frac{\partial u}{\partial y},\frac{\partial u}{\partial z}$,及$u$在$M(1,1,1)$处的全微分.
\end{example}
可不做在作业中,发在群里即可.

\begin{homework} 
    ex9.2:2(2)(5)(8),3,4,6,13(4)(6),16.
\end{homework}